@using System.Text.RegularExpressions
@inherits StatiqRazorPage<IEnumerable<IDocument>>
@{
    var groupModel = Model.Select((i, index) => new
    {
        i,
        index
    }).GroupBy(group => group.index / 3 , element => element.i);
}

@foreach (var group in groupModel)
{
    <div class="tfx-flex-row my-4 justify-content-center align-items-center">
        @foreach (IDocument post in group)
        {
            @Html.Partial($"/{Constants.ProjectPath}/components/_projectCard.cshtml", post)
        }
    </div>
}

<br/>

@{
    IDocument older = Document.GetDocument(Keys.Next);
    IDocument newer = Document.GetDocument(Keys.Previous);
    Regex lastNumberReg = new Regex(@"\d");
}
@if (older != null || newer != null)
{
    <div class="d-flex flex-row justify-content-between">
        <div>
            @if (older != null)
            {
                <a class="tfx-btn tfx-btn-teal" href="@(!lastNumberReg.IsMatch(Context.GetLink(older).Last().ToString()) ? Context.GetLink(older) : Context.GetLink(older) + ".html")" role="button">&lt;&lt;Older</a>
            }
        </div>
        <div>
            @if (newer != null)
            {
                <a class="tfx-btn tfx-btn-teal" href="@(!lastNumberReg.IsMatch(Context.GetLink(newer).Last().ToString()) ? Context.GetLink(newer) : Context.GetLink(newer) + ".html")" role="button">Newer >></a>
            }
        </div>
    </div>
}
<br/>
<br/>
